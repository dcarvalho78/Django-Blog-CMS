{% load blog_tags %} {% load static %} {% include "blog/includes/header.html" %} <header class="bg-dark py-5">
  <div class="container px-5">
    <div class="row">
      
        <div class="my-5 text-center">
          <h1 class="display-5 fw-bolder text-white mb-2">Blog</h1>
        </div>
      </div>
    </div>
  </div>
</header>
<section class="py-5 bg-light" id="posts">
  <div class="container">
    <div class="row gx-3"> {% for post in posts %} <div class="col-lg-4 mb-3">
        <a class="text-decoration-none" href="{% url 'blog:post_detail' post.publish.year post.publish.month post.publish.day post.slug %}" class="post-link">
          <div class="card shadow border-0 h-100"> {% if post.image %} <img src="{{ post.image.url }}" class="card-img" alt="{{ post.title }}"> {% else %} <img src="https://dummyimage.com/400x250/ced4da/6c757d&text=Blog+Post" class="card-img" alt="{{ post.title }}"> {% endif %} 
            <div class="card-img-overlay gradient-1 d-flex flex-column">
              <div class="badge bg-primary bg-gradient rounded-pill mb-2 align-self-start">{{ post.category.name }}</div>
              <div class="card-body text-white p-4 d-flex flex-column justify-content-center">
                <h5 class="card-title">{{ post.title }}</h5>
                <p class="card-text">{{ post.body|truncatewords:15 }}</p>
              </div>
              <div class="mt-auto">
                <div class="pt-0 bg-transparent border-top-0">
                  <div class="d-flex align-items-center justify-content-between w-100">
                    <div class="d-flex align-items-center">
                      <div class="author-icon">{{ post.author.get_full_name|default:post.author.username|first }}</div>
                      <div class="text-white">
                        <div class="fw-bold small">{{ post.author.get_full_name|default:post.author.username }}</div>
                        <div class="small">{{ post.publish|date:"d. F Y" }}</div>
                      </div>
                    </div>
                    <div class="d-flex gap-3">
                      <div class="text-white">
                        <a class="share-btn" data-bs-toggle="modal" data-bs-target="#shareModal" data-post-title="{{ post.title }}">
                          <i class="bi bi-share"></i>
                        </a>
                      </div>
                      <div class="text-white d-flex align-items-center gap-1">
                        <i class="bi bi-chat"></i>
                        <span class="small">{% if post.comments.count %}{{ post.comments.count }}{% else %}0{% endif %}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>
      <!-- Share Modal -->
      <div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="shareModalLabel">Share Post</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body"> {% if sent %} <h1>E-mail successfully sent</h1>
              <p> "{{ post.title }}" was successfully sent to {{ form.cleaned_data.to }}. </p> {% else %} <h1>Share " <span id="modalPostTitle"></span>" by e-mail </h1>
              <form method="post" novalidate>
                {{ form.as_p }} {% csrf_token %} <input type="submit" value="Send e-mail">
              </form> {% endif %}
            </div>
          </div>
        </div>
      </div> 
      {% endfor %}
    </div> 
    {% include "blog/includes/pagination.html" with page=posts %}
  </div>
  </div>
</section> {% include "blog/includes/footer.html" %}