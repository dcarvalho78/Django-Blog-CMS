{% load blog_tags %}
{% load static %}
{% include "blog/includes/header.html" %}
<section class="py-5">
   <div class="container px-5 my-5">
      <div class="row gx-5">
         <div class="col-lg-3">
            <div class="d-flex align-items-center mt-lg-5 mb-4">
               <img class="img-fluid rounded-circle" src="https://dummyimage.com/80x80/ced4da/6c757d.jpg" alt="..." />
               <div class="ms-3">
                  <div class="fw-bold">{{ post.author.get_full_name|default:post.author.username|first }}</div>
                  <div class="text-muted">News, Business</div>
               </div>
            </div>
         </div>
         <div class="col-lg-9">
            <article>
               <header class="mb-4">
                  <h1 class="fw-bolder mb-1">Welcome to Blog Post!</h1>
                  <div class="text-muted fst-italic mb-2">{{ post.publish|date:"d. F Y" }}</div>
                  <a class="badge bg-secondary text-decoration-none link-light" href="#!">Web Design</a>
                  <a class="badge bg-secondary text-decoration-none link-light" href="#!">Freebies</a>
               </header>
               <figure class="mb-4"><img class="img-fluid rounded" src="{{ post.image.url }}" alt="..." /></figure>
               <section class="mb-5">
                  {{ post.body }}
               </section>
            </article>
            <section>
               <div class="card bg-light">
                  <div class="card-body">
                     {% with comments.count as total_comments %}
                     <h2>
                        {{ total_comments }} comment{{ total_comments|pluralize }}
                     </h2>
                     {% endwith %}                                    
                      <form action="{% url "blog:post_comment" post.id %}" method="post" class="mb-4">
						  {{ form.as_p }}
						  {% csrf_token %}
						  <p><input type="submit" value="Add comment"></p>
						</form>

                     
                     {% for comment in comments %}
                     <div class="d-flex mt-4">
                        <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                        <div class="ms-3">
                           <div class="fw-bold">{{ comment.name }}</div>
                           {{ comment.created }}
                           {{ comment.body|linebreaks }}
                        </div>
                     </div>
                     {% empty %}
                     <p>There are no comments yet.</p>
                     {% endfor %}
                  </div>
               </div>
         </div>
      </div>
      </section>
   </div>
   </div>
   </div>
</section>
</main>
{% include "blog/includes/footer.html" %}
